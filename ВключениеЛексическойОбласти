как включить кодировку Unicode, лексическую область и функции CL в файле Emacs Lisp
Posted on September 9, 2013	by Jisang Yoo
Оглавление

    1. как включить кодировку UTF-8
    2. как включить лексическую область
    3. как использовать функции CL

Я рекомендую Emacs для начинающих, чтобы включить по крайней мере три вещей в их Elisp файлов (такие как dotemacs файлы, также известные Инициализационные файлы), которые уменьшат сюрпризы позже. Три вещи

    1) кодирующий Юникода (UTF-8)
    2) лексическая область (обычно известная как режим лексической связки)
    3) CL функции

1. как включить кодировку UTF-8

Для того, чтобы иметь возможность использовать символы Unicode (в строках или комментариях) в вашем файле инициализации, посетите файл инициализации, а затем вызвать команду add-file-local-variable-prop-line добавить локальную переменную файла кодирования с UTF-8 в качестве значения.

M-x add-file-local-variable-prop-line RET coding RET utf-8 RET

Затем сохраните и закройте файл. Вы должны использовать add-file-local-variable-prop-line и не add-file-local-variable.
2. как включить лексическую область

Для того, чтобы сделать код в файле инициализации с лексической областью видимости, посетите файл инициализации, а затем вызовети команду add-file-local-variable-prop-line и добвте в файл локальную переменную lexical-binding с t в качестве значения.

M-x add-file-local-variable-prop-line RET lexical-binding RET t RET

Затем сохраните и закройте файл. Для этого вы тоже должны использовать add-file-local-variable-prop-line и не add-file-local-variable.

3. как использовать функции CL

Для использования CL функций/макросов (с префиксом cl), как cl-loop, cl-defun, cl-destructuring-bind в вашем файле инициализации, вы можете добавить эту строку в файл инициализации:

(require 'cl-lib)

Эта линия не должна быть вашей первой линии. Файл инициализации не должен выглядеть следующим образом:

(require 'cl-lib)
;; -*- coding: utf-8; lexical-binding: t; -*-

...

Он должен выглядеть следующим образом:

;; -*- coding: utf-8; lexical-binding: t; -*-

(require 'cl-lib)

...

Некоторые статьи разделяют фрагменты Emacs Lisp, которые не будут работать, если не включить следующую строку при копировании их:

(require 'cl)

Для того, чтобы определить такой код легко и отношения между cl и cl-lib, см подсветки старых названий функций стиля CL в Emacs Lisp
